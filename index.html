<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸ›’ Digital Nest</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<header>
  <h1>ðŸ›’ Digital Nest</h1>
  <p>View Only â€“ No Editing</p>
</header>

<div id="products"></div>

<!-- PRODUCT DETAIL OVERLAY -->
<div id="productOverlay">
  <span id="closeOverlay">âœ•</span>

  <div class="overlay-content">
    <img id="overlayImg">
    <div class="overlay-info">
      <h2 id="overlayName"></h2>
      <p id="overlayDesc"></p>
      <p class="price" id="overlayPrice"></p>
    </div>
  </div>
</div>

<script>
fetch("products.json")
  .then(res => res.json())
  .then(data => {
    const container = document.getElementById("products");
    window.productsData = data;

    data.forEach(item => {
      const card = document.createElement("div");
      card.className = "card";

      if (item.stock === 0) {
        card.classList.add("out-stock");
      }

      card.innerHTML = `
        ${item.stock === 0 ? `<div class="stock-label">OUT OF STOCK</div>` : ""}
        <img src="${item.image}" alt="${item.name}"
             ${item.stock === 0 ? "" : `onclick="openOverlay(${item.id})"`}>
        <div class="info">
          <h3>${item.name}</h3>
          <p class="price">${item.price}</p>
        </div>
      `;

      container.appendChild(card);
    });
  })
  .catch(() => {
    document.getElementById("products").innerHTML = "Failed to load data";
  });

function openOverlay(id) {
  const product = window.productsData.find(p => p.id === id);
  if (!product) return;

  document.getElementById("overlayImg").src = product.image;
  document.getElementById("overlayName").innerText = product.name;
  document.getElementById("overlayDesc").innerText = product.description;
  document.getElementById("overlayPrice").innerText = product.price;

  document.getElementById("productOverlay").style.display = "flex";
}

document.getElementById("closeOverlay").onclick = function (e) {
  e.stopPropagation();
  document.getElementById("productOverlay").style.display = "none";
};

document.getElementById("productOverlay").onclick = function (e) {
  if (e.target === this) this.style.display = "none";
};
</script>

</body>
</html>
